(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{621:function(t,e,n){"use strict";n.r(e);var r=n(480),o=n(479),l=n(59),c=n(12),f=(n(50),n(36)),h=n(31),m=n(32),d=(n(19),n(5),n(29),n(15),n(38),n(21),n(143)),v=n.n(d).a.create({baseURL:"/"}),w=function(){return Object(m.a)((function t(e){Object(h.a)(this,t),this.useTransferAcceleration=e.useTransferAcceleration,e.chunkSize=e.chunkSize||0,this.chunkSize=Math.max(1048576*e.chunkSize,5242880),e.threadsQuantity=e.threadsQuantity||0,this.threadsQuantity=Math.min(e.threadsQuantity||5,15),this.timeout=0,this.file=e.file,this.fileName=e.fileName,this.aborted=!1,this.uploadedSize=0,this.progressCache={},this.activeConnections={},this.parts=[],this.uploadedParts=[],this.fileId=null,this.fileKey=null,this.onProgressFn=function(){},this.onErrorFn=function(){},this.baseURL=e.baseURL}),[{key:"start",value:function(){this.initialize()}},{key:"initialize",value:(n=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,r,o,l,c,h,m,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=this.file.name,r={name:n},t.next=5,v.request({url:"/multipartInit",method:"POST",data:r,baseURL:this.baseURL});case 5:return o=t.sent,l=o.data,this.fileId=l.fileId,this.fileKey=l.fileKey,c=Math.ceil(this.file.size/this.chunkSize),h={fileId:this.fileId,fileKey:this.fileKey,parts:c},t.next=13,v.request({url:"/multipartPreSignedUrls",method:"POST",data:h,baseURL:this.baseURL});case 13:m=t.sent,d=m.data.parts,(e=this.parts).push.apply(e,Object(f.a)(d)),this.sendNext(),t.next=23;break;case 19:return t.prev=19,t.t0=t.catch(0),t.next=23,this.complete(t.t0);case 23:case"end":return t.stop()}}),t,this,[[0,19]])}))),function(){return n.apply(this,arguments)})},{key:"sendNext",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object.keys(this.activeConnections).length;if(!(n>=this.threadsQuantity))if(this.parts.length){var r=this.parts.pop();if(this.file&&r){var o=(r.PartNumber-1)*this.chunkSize,l=this.file.slice(o,o+this.chunkSize);this.sendChunk(l,r,(function(){t.sendNext()})).then((function(){t.sendNext()})).catch((function(n){if(e<=6){e++;console.log("Part#".concat(r.PartNumber," failed to upload, backing off ").concat(100*Math.pow(2,e)," before retrying...")),(o=100*Math.pow(2,e),new Promise((function(t){return setTimeout(t,o)}))).then((function(){t.parts.push(r),t.sendNext(e)}))}else console.log("Part#".concat(r.PartNumber," failed to upload, giving up")),t.complete(n);var o}))}}else n||this.complete()}},{key:"complete",value:(e=Object(c.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||this.aborted){t.next=3;break}return this.onErrorFn(e),t.abrupt("return");case 3:if(!e){t.next=6;break}return this.onErrorFn(e),t.abrupt("return");case 6:return t.prev=6,t.next=9,this.sendCompleteRequest();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),this.onErrorFn(t.t0);case 14:case"end":return t.stop()}}),t,this,[[6,11]])}))),function(t){return e.apply(this,arguments)})},{key:"sendCompleteRequest",value:(t=Object(c.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.fileId||!this.fileKey){t.next=4;break}return e={fileId:this.fileId,fileKey:this.fileKey,parts:this.uploadedParts},t.next=4,v.request({url:"/multipartFinalize",method:"POST",data:e,baseURL:this.baseURL});case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"sendChunk",value:function(t,e,n){var r=this;return new Promise((function(o,l){r.upload(t,e,n).then((function(t){200===t?o():l(new Error("Failed chunk upload"))})).catch((function(t){l(t)}))}))}},{key:"handleProgress",value:function(t,e){var n=this;if(this.file){"progress"!==e.type&&"error"!==e.type&&"abort"!==e.type||(this.progressCache[t]=e.loaded),"uploaded"===e.type&&(this.uploadedSize+=this.progressCache[t]||0,delete this.progressCache[t]);var r=Object.keys(this.progressCache).map(Number).reduce((function(t,e){return t+n.progressCache[e]}),0),o=Math.min(this.uploadedSize+r,this.file.size),l=this.file.size,c=Math.round(o/l*100);this.onProgressFn({sent:o,total:l,percentage:c})}}},{key:"upload",value:function(t,e,n){var r=this;return new Promise((function(o,l){var c=function(t,e,n){delete r.activeConnections[e.PartNumber-1],l(t),window.removeEventListener("offline",n)};if(r.fileId&&r.fileKey){window.navigator.onLine||l(new Error("System is offline"));var f=r.activeConnections[e.PartNumber-1]=new XMLHttpRequest;f.timeout=r.timeout,n();var h=r.handleProgress.bind(r,e.PartNumber-1);f.upload.addEventListener("progress",h),f.addEventListener("error",h),f.addEventListener("abort",h),f.addEventListener("loadend",h),f.open("PUT",e.signedUrl);var m=function(){return f.abort()};f.onreadystatechange=function(){if(4===f.readyState&&200===f.status){var t=f.getResponseHeader("ETag");if(t){var n={PartNumber:e.PartNumber,ETag:t.replaceAll('"',"")};r.uploadedParts.push(n),o(f.status),delete r.activeConnections[e.PartNumber-1],window.removeEventListener("offline",m)}}},f.onerror=function(t){c(t,e,m)},f.ontimeout=function(t){c(t,e,m)},f.onabort=function(){c(new Error("Upload canceled by user or system"),e)},window.addEventListener("offline",m),f.send(t)}}))}},{key:"onProgress",value:function(t){return this.onProgressFn=t,this}},{key:"onError",value:function(t){return this.onErrorFn=t,this}},{key:"abort",value:function(){var t=this;Object.keys(this.activeConnections).map(Number).forEach((function(e){t.activeConnections[e].abort()})),this.aborted=!0}}]);var t,e,n}(),y=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,$=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,k={beforeRouteLeave:function(t,e,n){if(!this.hasChanged)return n();window.confirm("Do you really want to leave? You have unsaved changes!")?n():n(!1)},data:function(){var t=this;return{valid:!0,agreed:!1,error:!1,submitting:!1,uploaded:!1,action:"https://85o05b11ri.execute-api.eu-west-2.amazonaws.com/dev",endpoint:"https://85o05b11ri.execute-api.eu-west-2.amazonaws.com/dev/formToSpreadsheet",email2:"",urlMode:!1,choice:!0,percentage:void 0,fileData:null,uploader:null,baseForm:{firstname:"",lastname:"",email:"",title:"",description:"",team:[],type:null,file:null,ai:""},formats:[{text:this.$t("form.application.format.illustrations"),value:1},{text:this.$t("form.application.format.video"),value:2},{text:this.$t("form.application.format.audio"),value:3}],emailRules:[function(e){return!!e||t.$t("form.application.validation.required",{0:t.$t("form.application.email").toLowerCase()})},function(e){return $.test(e)||t.$t("form.application.validation.invalid",{0:t.$t("form.application.email").toLowerCase()})}],email2Rules:[function(e){return!!e||t.$t("form.application.validation.required",{0:t.$t("form.application.email").toLowerCase()})},function(e){return $.test(e)||t.$t("form.application.validation.invalid",{0:t.$t("form.application.email").toLowerCase()})},function(e){return e===t.baseForm.email||t.$t("form.application.validation.dontmatch")}],titleRules:[function(e){return!!e||t.$t("form.application.validation.required",{0:t.$t("form.application.title").toLowerCase()})},function(e){return e.length<85||t.$t("form.application.validation.lessThan",{0:t.$t("form.application.title").toLowerCase(),1:"85"})},function(e){return e.length>=2||t.$t("form.application.validation.moreThan",{0:t.$t("form.application.title").toLowerCase(),1:"2"})}],fileRules:[function(e){return!!e||t.$t("form.application.validation.file")},function(e){return!e||e.size<1e10||t.$t("form.application.validation.fileSize")}],urlRules:[function(e){return!!e||t.$t("form.application.validation.url")},function(e){return y.test(e)||!e||t.$t("form.application.validation.invalid",{0:t.$t("form.application.url")})}],descriptionRules:[function(e){return!!e&&e.length<=1e3||0===e.length||t.$t("form.application.validation.lessThan",{0:t.$t("form.application.description").toLowerCase(),1:"1000"})}],aiRules:[function(e){return!!e||t.$t("form.application.validation.required",{0:t.$t("form.application.title").toLowerCase()})},function(e){return!!e&&e.length<=1e3||0===e.length||t.$t("form.application.validation.lessThan",{0:t.$t("form.application.ia").toLowerCase(),1:"1000"})}],creditsRules:[function(e){return!!e&&e.length<=1e3||0===e.length||t.$t("form.application.validation.lessThan",{0:t.$t("form.application.credits").toLowerCase(),1:"1000"})}],typeRules:[function(e){return!!e||t.$t("form.application.validation.required",{0:t.$t("form.application.format.title").toLowerCase()})}],agreedRules:[function(e){return e||t.$t("form.application.validation.tos")}],birthday:null,menu:!1,major:!1,nameRules:[function(e){return!!e||t.baseForm.team.length>0||0===e.length&&t.baseForm.team.length>0||t.$t("form.application.validation.required",{0:t.$t("form.application.lastname").toLowerCase()})},function(e){return e.length<=45||t.$t("form.application.validation.lessThan",{0:t.$t("form.application.lastname").toLowerCase(),1:"45"})},function(e){return e.length>=2||0===e.length||t.$t("form.application.validation.moreThan",{0:t.$t("form.application.lastname").toLowerCase(),1:"2"})}],firstnameRules:[function(e){return!!e||t.baseForm.team.length>0||0===e.length&&t.baseForm.team.length||t.$t("form.application.validation.required",{0:t.$t("form.application.firstname").toLowerCase()})},function(e){return e.length<=45||t.$t("form.application.validation.lessThan",{0:t.$t("form.application.firstname").toLowerCase(),1:"45"})},function(e){return e.length>=2||0===e.length||t.$t("form.application.validation.moreThan",{0:t.$t("form.application.firstname").toLowerCase(),1:"2"})}]}},computed:{majorRules:function(){var t=this;return[function(e){return null!=e&&!1!==e||t.baseForm.team.length>0||t.$t("required")}]}},mounted:function(){},methods:{abort:function(){this.uploader.abort(),this.baseForm.file=null,this.fileData=null,this.percentage=void 0},addTeamMember:function(){this.baseForm.team.push({firstname:this.baseForm.firstname,lastname:this.baseForm.lastname}),this.baseForm.firstname="",this.baseForm.lastname="",this.major=!1},makeContact:function(t){this.baseForm.team.unshift(this.baseForm.team.splice(t,1)[0])},setFile:function(t){var e=this;try{var n={file:this.fileData,baseURL:this.action,threadsQuantity:4,useTransferAcceleration:!0};this.uploader=new w(n),this.uploader.onProgress((function(t){var n=t.percentage;100===e.percentage&&(e.uploaded=!0,console.log("this.uploader: ",e.uploader),e.baseForm.file=e.uploader.fileKey),n!==e.percentage&&(e.percentage=n)})).onError((function(t){console.log("error: ",t),e.error=!0})),this.uploader.start()}catch(t){console.log("error: ",t),this.error=!0}finally{this.submitting=!1}},submit:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.$refs.form.validate(),!t.valid){e.next=11;break}return t.urlMode&&(t.baseForm.file=t.baseForm.url),t.submitting=!0,e.next=7,t.$axios.$post(t.endpoint,t.baseForm);case 7:t.submitting=!1,t.form={},t.error=!1,t.$router.push({path:t.localePath("/thank_you")});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error: ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()}}},C=n(37),component=Object(C.a)(k,(function(){var t=this,e=t._self._c;return e("div",[e("section",{staticStyle:{"background-color":"#fff1d0"}},[e(o.a,{attrs:{justify:"center"}},[e(r.a,{attrs:{xs:"12",sm:"11",md:"8",lg:"7",xl:"6"}},[e("h1",{staticClass:"mb-8 mt-12"},[t._v("\n          "+t._s(t.$t("applications-are-closed"))+"\n        ")])])],1)],1),t._v(" "),e("section",{class:{"px-3":t.$vuetify.breakpoint.smAndDown}},[e(o.a,{attrs:{justify:"center"}},[e(r.a,{attrs:{xs:"12",sm:"11",md:"8",lg:"7",xl:"6"}},[e(l.a,{staticClass:"py-6 text-body-1"},[t._v("\n          "+t._s(t.$t("apply-placeholder"))+"\n        ")])],1)],1)],1)])}),[],!1,null,null,null);e.default=component.exports}}]);